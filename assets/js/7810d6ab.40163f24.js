"use strict";(self.webpackChunksso_docs=self.webpackChunksso_docs||[]).push([[380],{4137:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(n),f=i,h=u["".concat(l,".").concat(f)]||u[f]||d[f]||o;return n?r.createElement(h,a(a({ref:t},p),{},{components:n})):r.createElement(h,a({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=f;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[u]="string"==typeof e?e:i,a[1]=c;for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},7943:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var r=n(7462),i=(n(7294),n(4137));const o={sidebar_position:4},a="Public Client",c={unversionedId:"guides/public_pkce",id:"guides/public_pkce",title:"Public Client",description:"---",source:"@site/docs/guides/public_pkce.md",sourceDirName:"guides",slug:"/guides/public_pkce",permalink:"/sso-docs/guides/public_pkce",draft:!1,editUrl:"https://github.com/bcgov/sso-docs/docs/guides/public_pkce.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Confidential vs Public Client",permalink:"/sso-docs/guides/publicvsconfidential"},next:{title:"Installation JSON file and Identity Providers",permalink:"/sso-docs/guides/installation-json"}},l={},s=[{value:"Proof Key for Code Exchange (PKCE)",id:"proof-key-for-code-exchange-pkce",level:2},{value:"Public Clients, Redirect URIs and Web Origins",id:"public-clients-redirect-uris-and-web-origins",level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"public-client"},"Public Client"),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"proof-key-for-code-exchange-pkce"},"Proof Key for Code Exchange (PKCE)"),(0,i.kt)("p",null,"The javascript adapter for keycloak has built-in support for using PKCE. See the documentation under the init method here, specifically the ",(0,i.kt)("inlineCode",{parentName:"p"},"pkceMethod"),". For example, when initializing the adapter you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"keycloak.init({ pkceMethod: 'S256' })")," to use PKCE. Use the 'S256' method for you public client."),(0,i.kt)("p",null,"If not using the adapter, you can use a custom implementation. This will require 4 steps:"),(0,i.kt)("p",null,"Create a ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," (cryptographically secure string)\nHash the code verifier with the SHA256 method to create a ",(0,i.kt)("inlineCode",{parentName:"p"},"code_challenge"),"\nSend the code challenge and code challenge method (S256) as query parameters when redirecting users to the authorization endpoint\nWhen exchanging the received code for an access token, send the initial ",(0,i.kt)("inlineCode",{parentName:"p"},"code_verifier")," to ensure your application initiated the current exchange.\nFor an example of a custom PKCE implementation, see here for generating the authentication URL and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bcgov/sso-requests/blob/dev/app/utils/openid.ts#L49"},"here")," for exchanging the received code for an access token."),(0,i.kt)("p",null,"Learn More ",(0,i.kt)("a",{parentName:"p",href:"https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"OIDC & PKCE")),(0,i.kt)("h2",{id:"public-clients-redirect-uris-and-web-origins"},"Public Clients, Redirect URIs and Web Origins"),(0,i.kt)("p",null,"The redirect URIs will be copied over to Keycloak Web Origins setup. In addition, adding \u2018+\u2019 to permit all origins of Valid Redirect URIs"))}d.isMDXComponent=!0}}]);