"use strict";(self.webpackChunksso_docs=self.webpackChunksso_docs||[]).push([[9773],{5680:(e,t,n)=>{n.d(t,{xA:()=>s,yg:()=>h});var i=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=i.createContext({}),p=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=p(e.components);return i.createElement(c.Provider,{value:t},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=o,h=u["".concat(c,".").concat(d)]||u[d]||y[d]||r;return n?i.createElement(h,a(a({ref:t},s),{},{components:n})):i.createElement(h,a({ref:t},s))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:o,a[1]=l;for(var p=2;p<r;p++)a[p]=n[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9602:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>y,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var i=n(8168),o=(n(6540),n(5680));const r={sidebar_position:1},a="Client types",l={unversionedId:"integrating-your-application/client-types",id:"integrating-your-application/client-types",title:"Client types",description:"--- Learn about various client types to choose from based on the security needs of your app.",source:"@site/docs/integrating-your-application/client-types.md",sourceDirName:"integrating-your-application",slug:"/integrating-your-application/client-types",permalink:"/sso-docs/integrating-your-application/client-types",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Integrating Your Application",permalink:"/sso-docs/category/integrating-your-application"},next:{title:"Login Page Guide",permalink:"/sso-docs/integrating-your-application/login-guide"}},c={},p=[{value:"Client type confidential vs public",id:"client-type-confidential-vs-public",level:3},{value:"1. Confidential client:",id:"1-confidential-client",level:3},{value:"2. Public client with PKCE:",id:"2-public-client-with-pkce",level:3},{value:"Proof Key for Code Exchange (PKCE)",id:"proof-key-for-code-exchange-pkce",level:3},{value:"Why choose PKCE over Implicit flow:",id:"why-choose-pkce-over-implicit-flow",level:3},{value:"Diagram",id:"diagram",level:3}],s={toc:p},u="wrapper";function y(e){let{components:t,...r}=e;return(0,o.yg)(u,(0,i.A)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"client-types"},"Client types"),(0,o.yg)("p",null,"--- Learn about various client types to choose from based on the security needs of your app."),(0,o.yg)("h3",{id:"client-type-confidential-vs-public"},"Client type confidential vs public"),(0,o.yg)("p",null,"In the ",(0,o.yg)("a",{parentName:"p",href:"https://bcgov.github.io/sso-requests"},"CSS App"),", when requesting a new client you can specify to set it up in two ways: "),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("em",{parentName:"li"},"Confidential client")," "),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("em",{parentName:"li"},"Public Client")," with PKCE.")),(0,o.yg)("h3",{id:"1-confidential-client"},"1. Confidential client:"),(0,o.yg)("p",null,"With a confidential client, the back-end component securely stores an application secret that allows it to communicate with the KeyCloak server to facilitate the OIDC authentication process."),(0,o.yg)("h3",{id:"2-public-client-with-pkce"},"2. Public client with PKCE:"),(0,o.yg)("p",null,"A public client is slightly less secure because there is no secret, but this configuration is required by some architectures and is supported as well. ",(0,o.yg)("a",{parentName:"p",href:"client-types#proof-key-for-code-exchange-pkce"},"Public clients can use PKCE (Proof Key for Code Exchange) as a more secure flow.")),(0,o.yg)("h3",{id:"proof-key-for-code-exchange-pkce"},"Proof Key for Code Exchange (PKCE)"),(0,o.yg)("p",null,"The javascript adapter for keycloak has built-in support for using PKCE. See the documentation under the init method here, specifically the ",(0,o.yg)("inlineCode",{parentName:"p"},"pkceMethod"),".\nFor example, when initializing the adapter you can call ",(0,o.yg)("inlineCode",{parentName:"p"},"keycloak.init({ pkceMethod: 'S256' })")," to use PKCE. Use the 'S256' method for you public client."),(0,o.yg)("p",null,"If not using the adapter, you can use a custom implementation. This will require 4 steps:"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"Create a ",(0,o.yg)("inlineCode",{parentName:"li"},"code_verifier")," (cryptographically secure string)"),(0,o.yg)("li",{parentName:"ol"},"Hash the code verifier with the SHA256 method to create a ",(0,o.yg)("inlineCode",{parentName:"li"},"code_challenge")),(0,o.yg)("li",{parentName:"ol"},"Send the code challenge and code challenge method (S256) as query parameters when redirecting users to the authorization endpoint."),(0,o.yg)("li",{parentName:"ol"},"When exchanging the received code for an access token, send the initial ",(0,o.yg)("inlineCode",{parentName:"li"},"code_verifier")," to ensure your application initiated the current exchange.\nFor an example of a custom PKCE implementation, see here for generating the authentication URL and ",(0,o.yg)("a",{parentName:"li",href:"https://github.com/bcgov/sso-requests/blob/dev/app/utils/openid.ts"},"here")," for exchanging the received code for an access token.")),(0,o.yg)("h3",{id:"why-choose-pkce-over-implicit-flow"},"Why choose PKCE over Implicit flow:"),(0,o.yg)("p",null,"PKCE provides dynamic client secrets, meaning your app\u2019s client secrets can stay secret (even without a back end for your app). PKCE is better and more secure than the implicit flow (AKA the \u201ctoken flow\u201d).\nIf you\u2019re using the implicit flow, then you should switch to PKCE. If you use an implicit flow to authorize your Dropbox app, then PKCE is a better, more secure replacement, and you should no longer use implicit flow.\nSee the diagram below for use cases where each option is appropriate."),(0,o.yg)("h3",{id:"diagram"},"Diagram"),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Private vs Confidential",src:n(1733).A,width:"1040",height:"740"})),(0,o.yg)("p",null,"Learn More ",(0,o.yg)("a",{parentName:"p",href:"https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"OIDC & PKCE")))}y.isMDXComponent=!0},1733:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/client_type_Dec2023-67252e190a1a22a499982b890d5348bf.svg"}}]);